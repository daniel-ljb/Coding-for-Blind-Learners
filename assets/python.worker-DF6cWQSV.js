(function(){"use strict";importScripts("https://cdn.jsdelivr.net/pyodide/v0.29.3/full/pyodide.js");let e=null,r=null;async function i(){if(e)return e;e=await loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.29.3/full/"});function t(...s){self.postMessage({type:"output",data:s.join(" ")})}function o(s=""){return t(s),new Promise(n=>{r=n})}return e.globals.set("print",t),e.globals.set("input",o),e}self.onmessage=async t=>{const{type:o,data:s}=t.data;switch(o){case"run":try{const n=await i(),a=s.replace(/\binput\s*\(/g,"await input("),l=await n.runPythonAsync(a);self.postMessage({type:"terminated",result:l?.toString()||"Program completed successfully"})}catch(n){self.postMessage({type:"error",error:n.toString(),traceback:n.message})}break;case"input":if(r==null)break;r(s),r=null;break}},self.onerror=t=>{self.postMessage({type:"error",error:t})}})();
